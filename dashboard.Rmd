---
title: "Poroteo Aborto 2020"
output: 
  flexdashboard::flex_dashboard:
    orientation: columns
    vertical_layout: fill
---

<head>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-N1GX94R8R8"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-N1GX94R8R8');
</script>
</head> 

```{r setup, include=FALSE}
library(flexdashboard)
library(gsheet)
library(tidyverse)
library(DT)
library(plotly)
```

```{r,include=FALSE}

url <- "https://docs.google.com/spreadsheets/d/1TUTag7Majqhn5noRLLMUJ6SFJ0Phwlo-Oc1T59uSZCE/edit#gid=0"

a <- gsheet2text(url, format='csv')

df <- read_csv(a,skip = 1)

df <- df %>% 
  filter(!is.na(Cargo))
```


-----------------------------------------------------------------------

# Resumen

```{r message=FALSE, warning=FALSE}
p1 <- df %>% 
  group_by(Cargo, AbortoLegal) %>% count() %>% 
  ggplot(aes(AbortoLegal, n, fill=AbortoLegal))+
  geom_col()+
  coord_flip()+
  theme(legend.position = 'bottom')+
  facet_wrap(Cargo~., scales = 'free')

ggplotly(p1)
```

-----------------------------------------------------------------------
# Diputados

```{r}
table_diputados <- df %>% 
  filter(Cargo == 'Diputados Nacionales') %>% 
  select(Nombre, Genero,Distrito,Bloque,AbortoLegal, FuenteAbortoLegal,twitter)

datatable(table_diputados ,options = list(c(scrollY="200px", scrollX="300px", pageLength = 100)),  filter = 'top')

```

# Senadores

```{r}
table_senadores <- df %>% 
  filter(Cargo == 'Senadores Nacionales') %>% 
  select(Nombre, Genero,Distrito,Bloque,AbortoLegal, FuenteAbortoLegal,twitter)

datatable(table_senadores ,options = list(c(scrollY="200px", scrollX="300px", pageLength = 100)),  filter = 'top')

```
